<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PINEAPPLE MYSTERY - FINAL</title>
<style>
  :root { 
    --bg: #050505; --accent: #f4d03f; --red: #cc0000; --blue: #2b57ff; --green: #28a745; 
    --kiwi: #00ff00; --bberry: #4facfe; --pink: #ff69b4; --gold: #b8860b;
  }
  body { font-family: 'Courier New', monospace; background: var(--bg); color: #e0e0e0; margin: 0; text-align: center; transition: 0.8s; height: 100vh; overflow: hidden; }
  
  /* ÌÖåÎßà */
  body.kiwi-mode { --accent: var(--kiwi); color: var(--kiwi); }
  body.blueberry-mode { --accent: var(--bberry); color: #fff; }
  body.eden-active { background: #fff !important; color: #000 !important; }
  body.equinox-mode { background: #111 !important; color: #fff !important; }

  /* EQUINOX Ìã∞Ïª§ */
  body.equinox-mode .t-top { background: #ffffff !important; color: #000 !important; }
  body.equinox-mode .t-bottom { background: #000000 !important; color: #ffffff !important; border-top: 1px solid #333; }

  .equinox-text {
    font-size: 50px; font-weight: 900;
    background: linear-gradient(135deg, #ffffff 50%, #000000 50%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    display: inline-block; margin-bottom: 10px;
  }

  .ticker-wrap { width: 100%; overflow: hidden; background: var(--accent); color: #000; padding: 5px 0; font-weight: 900; position: fixed; z-index: 100; top: 0; transition: 0.5s; }
  .t-bottom { top: auto; bottom: 0; }
  .ticker { display: inline-block; white-space: nowrap; animation: ticker 30s linear infinite; }
  @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

  .wrapper { height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; }
  .card { background: rgba(15,15,15,0.95); padding: 30px; border-radius: 20px; border: 1px solid #333; width: 100%; max-width: 380px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 10; display: none; }

  .btn { background: #111; color: #fff; border: 1px solid #333; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; font-weight: bold; }
  
  #debug-panel { max-height: 200px; overflow-y: auto; margin-top: 15px; text-align: left; font-size: 11px; border: 1px dashed var(--accent); padding: 10px; }
  .p-setting { margin-bottom: 8px; border-bottom: 1px solid #222; padding-bottom: 5px; display: flex; justify-content: space-between; align-items: center; }
  select { background: #000; color: var(--accent); border: 1px solid #333; font-size: 10px; }

  #role { font-size: 45px; font-weight: 900; margin-bottom: 10px; }
  #skill { font-size: 28px; font-weight: bold; margin-bottom: 10px; }
  .sk-gun { background: linear-gradient(45deg, #ff0000, #0000ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .sk-pink { color: var(--pink); } .sk-gold { color: var(--gold); }
  .sk-eden { color: #ff0000; text-shadow: 0 0 10px rgba(255,0,0,0.5); }
  .sk-bberry-devil { color: var(--bberry); font-style: italic; }

  #log-box { display: none; text-align: left; background: #000 !important; padding: 15px; font-size: 13px; color: var(--kiwi) !important; border: 1px solid var(--kiwi); margin-top: 15px; }
</style>
</head>
<body>

<div class="ticker-wrap t-top"><div class="ticker">PINEAPPLE SYSTEM ONLINE 0217 üçç CORE SECURED üçç</div></div>

<div id="h-screen" style="display:none; position:fixed; width:100%; height:100%; background:#000; z-index:200; flex-direction:column; justify-content:center; align-items:center;">
  <div style="color:#fff; font-weight:bold;">INITIALIZING SYSTEM...</div>
  <div style="width:200px; height:3px; background:#222; margin-top:15px;"><div id="p-bar" style="width:0%; height:100%; background:#fff;"></div></div>
</div>

<div class="wrapper">
  <div id="menu" class="card" style="display: block;">
    <h1 id="m-title" style="color:var(--accent); letter-spacing:5px;">PINEAPPLE</h1>
    <p id="m-desc" style="font-size:10px; color:#555; margin-bottom:20px;">DOMINANT SYSTEM</p>
    <div>PLAYER: <input type="number" id="pCount" min="4" max="20" value="6" onchange="updateAdminUI()" style="background:none; border:none; border-bottom:1px solid #444; color:#fff; width:45px; text-align:center;"></div>
    <button onclick="bootSystem()" class="btn" style="color:var(--accent);">START SYSTEM</button>
    
    <div id="debug-panel" style="display:none;">
      TYPE: <select id="forceType" style="margin-bottom:10px;"><option value="none">RANDOM</option><option value="Standard">Standard</option><option value="Chillsear">Chillsear</option><option value="Zombie">Zombie</option><option value="Eden">Eden</option></select>
      <div id="p-list"></div>
    </div>
    <span onclick="openAdmin()" style="font-size:10px; color:#1a1a1a; cursor:pointer; display:block; margin-top:20px;">[ADMIN]</span>
  </div>

  <div id="equinox-screen" class="card">
    <div class="equinox-text">EQUINOX</div>
    <p style="font-size:12px; color:#888;">ÏñëÍ≥º Ïùå ÏÇ¨Ïù¥Ïóê Ï°¥Ïû¨ÌïòÎäî Î¨¥Ïñ∏Í∞Ä</p>
    <div style="font-size:9px; color:#666; text-align:left; line-height:1.8; font-family: monospace;">
      EDEN: 01000101 01000100 01000101 01001110<br>
      DEVIL: 01000100 01000101 01010110 01001001 01001110<br>
      KIWI: 01001011 01001001 01010111 01001001
    </div>
    <button onclick="location.reload()" class="btn">RETURN</button>
  </div>

  <div id="draw-area" class="card">
    <div id="pNum" style="color:#888; font-size:22px; margin-bottom:30px;">PLAYER 1</div>
    <button onclick="reveal()" class="btn" style="background:var(--red); height:80px; font-size:20px;">ACCESS ROLE</button>
  </div>

  <div id="result" class="card" style="background:#fdfdfd !important; color:#111 !important;">
    <div id="role"></div>
    <div id="skill"></div>
    <div id="desc" style="font-size:15px; color:#444; margin-bottom:20px; line-height:1.5;"></div>
    <button onclick="next()" class="btn" style="background:#000; color:#fff;">CONFIRM</button>
  </div>

  <div id="final-screen" class="card">
    <div id="fType" style="font-size:40px; font-weight:900;"></div>
    <div id="fDesc" style="color:#888; margin-bottom:20px; font-size:14px;"></div>
    <button onclick="checkLog()" class="btn" style="font-size:12px;">VIEW DATA LOG (0217)</button>
    <div id="log-box"></div>
    <button onclick="location.reload()" class="btn" style="color:#444; border:none; margin-top:10px;">REBOOT</button>
  </div>
</div>

<div class="ticker-wrap t-bottom"><div class="ticker">PINEAPPLE CORP üçç 0217 üçç EQUINOX 619 üçç</div></div>

<script>
const skills = {
  Î®∏Îçî: [
    {n:"Î∞©ÌÉÑ", d:"Ìïú Î≤à Í≥µÍ≤©ÏùÑ Î≤ÑÌåÅÎãàÎã§. (2Î™©Ïà®)"}, 
    {n:"Í∞ÄÎ∞©", d:"Ï£ΩÏù∏ ÎåÄÏÉÅÏù¥ ÏÇ¥ÏïÑÏûàÎäî Í≤ÉÏ≤òÎüº ÌñâÎèôÌïòÎã§Í∞Ä ÎßàÏßÄÎßâÏóê ÏÇ¨ÎßùÌï©ÎãàÎã§. (1Î™Ö)"}, 
    {n:"Ï¥ùÏû°Ïù¥", d:"Î≥¥ÏïàÍ¥ÄÍ≥º Í∞ôÏùÄ Î∞©ÏãùÏúºÎ°ú Ï≤òÏπòÌï©ÎãàÎã§.", s:"sk-gun"}
  ],
  Î≥¥ÏïàÍ¥Ä: [
    {n:"Í∞ïÏù∏Ìïú", d:"Î™©Ïà®Ïù¥ 2Í∞úÍ∞Ä Îê©ÎãàÎã§."}, 
    {n:"ÎßàÌîºÏïÑ", d:"Î®∏ÎçîÏôÄ Î™®Îì† ÏãúÎØºÏùÑ Ï†úÍ±∞ÌïòÎ©¥ Ï¶âÏãú ÏäπÎ¶¨Ìï©ÎãàÎã§.", s:"sk-gold"}
  ],
  ÏùòÏÇ¨: [
    {n:"ÏûêÍ∞ÄÏπòÏú†", d:"ÏûêÏã†ÏùÑ ÏπòÎ£åÌï† Ïàò ÏûàÏäµÎãàÎã§. (1Ìöå)"}, 
    {n:"Ï†ÑÎ¨∏ ÏùòÏÇ¨", d:"ÏµúÎåÄ 2Î™ÖÍπåÏßÄ ÏπòÎ£åÌï† Ïàò ÏûàÏäµÎãàÎã§."}
  ],
  ÏãúÎØº: [
    {n:"Ïä§ÌååÏù¥", d:"ÏãúÎØº/Î≥¥ÏïàÍ¥Ä Ï†úÍ±∞ Ïãú Î™©Ïà® Ï¶ùÍ∞Ä. Î®∏Îçî Ï≤òÏπò Ïãú ÏûêÏã†ÎèÑ ÏÇ¨ÎßùÌïòÎ©∞ ÏãúÎØºÏù¥ ÏäπÎ¶¨Ìï©ÎãàÎã§.", s:"sk-gold"}, 
    {n:"ÌçºÎ∏îwin", d:"Í∞ÄÏû• Î®ºÏ†Ä Î®∏ÎçîÏóêÍ≤å Ï£ΩÏúºÎ©¥ Ï¶âÏãú ÏãúÎØº ÏäπÎ¶¨ÏûÖÎãàÎã§.", s:"sk-pink"}, 
    {n:"Ìå®ÎßÅ", d:"Ìïú Î≤à Í≥µÍ≤©ÏùÑ ÎßâÏïÑÎÉÖÎãàÎã§."}
  ]
};

const mTypes = [
  {n:"Standard", w:59, d:"Ï∂îÍ∞Ä Îä•Î†•Ïù¥ Ìè¨Ìï®Îêú Í∏∞Î≥∏ ÎùºÏö¥ÎìúÏûÖÎãàÎã§.", c:"var(--red)"}, 
  {n:"Chillsear", w:30, d:"ÏùòÏÇ¨Í∞Ä ÏπòÎ£åÌï† Ïàò ÏóÜÎäî ÏïîÏÇ¥ ÎùºÏö¥ÎìúÏûÖÎãàÎã§.", c:"#87CEEB"}, 
  {n:"Zombie", w:10, d:"Ï£ΩÏùÄ ÏûêÍ∞Ä Ï¢ÄÎπÑÍ∞Ä ÎêòÏñ¥ Í∞êÏóºÏãúÌÇ§Îäî ÎùºÏö¥ÎìúÏûÖÎãàÎã§.", c:"#32CD32"}, 
  {n:"Eden", w:1, d:"[SYSTEM ERROR] Í≥µÌóàÏùò Í∞ïÎ¶º. Î®∏ÎçîÏùò Î™©Ïà®Ïù¥ 5Í∞úÍ∞Ä Îê©ÎãàÎã§.", c:"#000000"},
  {n:"Crying Devil", w:0, d:"Í≥†ÌÜµÎ∞õÎäî Î®∏ÎçîÎ•º Î≥¥Í≥† ÏßÄÏñ¥ÏßÑ Ïù¥Î¶ÑÏûÖÎãàÎã§. Ïä¨ÌîîÏùò Ïó∞ÏáÑÎ•º ÎÅäÏúºÏã≠ÏãúÏò§.", c:"#4facfe"}
];

let tP, cur, rls, rMT, aS, log = [];

function hideAll() { document.querySelectorAll('.card').forEach(c => c.style.display = 'none'); }

function openAdmin() {
  const pw = prompt("CODE:");
  if(pw === "619") {
    hideAll(); document.getElementById("equinox-screen").style.display = "block";
    document.body.className = "equinox-mode";
  } else if(pw === "9245" || pw === "1441") {
    document.body.className = pw === "9245" ? "kiwi-mode" : "blueberry-mode";
    document.getElementById("debug-panel").style.display = "block";
    if(pw === "1441" && !document.querySelector('option[value="Crying Devil"]')) {
      document.getElementById("forceType").innerHTML += `<option value="Crying Devil">Crying Devil</option>`;
    }
    updateAdminUI();
  }
}

function updateAdminUI() {
  const cnt = document.getElementById("pCount").value;
  const list = document.getElementById("p-list");
  list.innerHTML = "";
  for(let i=0; i<cnt; i++) {
    list.innerHTML += `<div class="p-setting">P${i+1}: 
      <select id="p${i}r"><option value="none">RAND</option><option value="Î®∏Îçî">Î®∏Îçî</option><option value="Î≥¥ÏïàÍ¥Ä">Î≥¥ÏïàÍ¥Ä</option><option value="ÏùòÏÇ¨">ÏùòÏÇ¨</option><option value="ÏãúÎØº">ÏãúÎØº</option></select>
      <select id="p${i}s"><option value="none">RAND</option><option value="Î∞©ÌÉÑ">Î∞©ÌÉÑ</option><option value="Í∞ïÏù∏Ìïú">Í∞ïÏù∏Ìïú</option><option value="ÏûêÍ∞ÄÏπòÏú†">ÏûêÍ∞ÄÏπòÏú†</option><option value="Ïä§ÌååÏù¥">Ïä§ÌååÏù¥</option></select></div>`;
  }
}

function bootSystem() {
  document.getElementById("h-screen").style.display = "flex";
  let p = 0;
  const iv = setInterval(() => {
    p += 10; document.getElementById("p-bar").style.width = p + "%";
    if(p >= 100) { clearInterval(iv); setup(); }
  }, 50);
}

function setup() {
  hideAll();
  document.getElementById("h-screen").style.display = "none";
  tP = parseInt(document.getElementById("pCount").value);
  const fT = document.getElementById("forceType").value;

  if(fT !== "none") rMT = mTypes.find(t => t.n === fT);
  else {
    const r = Math.random()*100; let c = 0;
    for(const t of mTypes) { c+=t.w; if(r<c){ rMT=t; break; } }
  }

  rls = new Array(tP).fill(null);
  aS = new Array(tP).fill(null);

  // Í¥ÄÎ¶¨Ïûê Ïò§Î≤ÑÎùºÏù¥Îìú Ï†ÅÏö©
  for(let i=0; i<tP; i++) {
    const sr = document.getElementById(`p${i}r`)?.value;
    const ss = document.getElementById(`p${i}s`)?.value;
    if(sr && sr !== "none") rls[i] = sr;
    if(ss && ss !== "none") {
       for(let k in skills) { const f = skills[k].find(s=>s.n===ss); if(f) aS[i] = f; }
    }
  }

  if(!rls.includes("Î®∏Îçî")) rls[Math.floor(Math.random()*tP)] = "Î®∏Îçî";
  
  if(rMT.n === "Crying Devil") {
    for(let i=0; i<tP; i++) if(rls[i] !== "Î®∏Îçî") rls[i] = "Î≥¥ÏïàÍ¥Ä";
  }

  rls = rls.map(r => r || "ÏãúÎØº");

  aS = aS.map((s, i) => {
    if(s) return s;
    const role = rls[i];
    if(role === "Î®∏Îçî") {
      if(rMT.n === "Standard") return skills.Î®∏Îçî[Math.floor(Math.random()*3)];
      if(rMT.n === "Eden") return {n:"Eden Protocol", d:"ÎãπÏã†ÏùÄ 5Í∞úÏùò Î™©Ïà®ÏùÑ Í∞ÄÏßÑ Î∂àÏÇ¨Ïã†ÏûÖÎãàÎã§. Î™®Îì† ÏãúÎØºÏùÑ ÎßêÏÇ¥ÌïòÏã≠ÏãúÏò§.", s:"sk-eden"};
      if(rMT.n === "Crying Devil") return {n:"Crying Devil", d:"ÎãπÏã†ÏùÄ Î∏îÎ£®Î≤†Î¶¨Ïùò Í≥†ÌÜµÎ∞õÎäî ÌååÌé∏ÏûÖÎãàÎã§. Î™®Îì† Ï¥ùÍµ¨Ïóê ÎßûÏÑúÏã≠ÏãúÏò§.", s:"sk-bberry-devil"};
      if(rMT.n === "Zombie") return {n:"Zombie Virus", d:"ÎãπÏã†ÏùÄ Ï≤´ Î≤àÏß∏ Í∞êÏóºÏûêÏûÖÎãàÎã§. Ï£ΩÏù∏ ÏÉÅÎåÄÎ•º Ï¢ÄÎπÑÎ°ú ÎßåÎì≠ÎãàÎã§."};
      return {n: rMT.n, d: rMT.d};
    }
    const pool = skills[role] || [{n:"Î¨¥Îä•Î†•", d:"Îä•Î†•Ïù¥ ÏóÜÏäµÎãàÎã§."}];
    return pool[Math.floor(Math.random()*pool.length)];
  });

  log = rls.map((r, i) => `P${i+1}: [${r}] - ${aS[i].n}`);
  cur = 0;
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `PLAYER 1`;
}

function reveal() {
  hideAll();
  const r = rls[cur], s = aS[cur];
  const rd = document.getElementById("role");
  rd.innerText = r;
  rd.style.color = r==="Î®∏Îçî"?"var(--red)":r==="Î≥¥ÏïàÍ¥Ä"?"var(--blue)":r==="ÏùòÏÇ¨"?"var(--green)":"#555";
  document.getElementById("skill").innerText = s.n;
  document.getElementById("skill").className = s.s || "";
  document.getElementById("desc").innerText = s.d;
  document.getElementById("result").style.display = "block";
}

function next() {
  cur++;
  if(cur >= tP) {
    hideAll();
    document.getElementById("final-screen").style.display = "block";
    document.getElementById("fType").innerText = rMT.n;
    document.getElementById("fType").style.color = rMT.c;
    document.getElementById("fDesc").innerText = rMT.d;
    if(rMT.n === "Eden") document.body.classList.add("eden-active");
    return;
  }
  hideAll();
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `PLAYER ${cur+1}`;
}

function checkLog() {
  const pw = prompt("0217:");
  if(pw === "0217") {
    document.getElementById("log-box").innerHTML = log.join("<br>");
    document.getElementById("log-box").style.display = "block";
  }
}
</script>
</body>
</html>
